<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <title>Help File for Configtool Decrypter/Encrypter</title>
</head>

<body>
    <section class="section">
        <header>
            <h1>
                EGM Configuration Decrypter/Encrypter Tool User's Guide
            </h1>
        </header>

        <h3>
            This document is in two parts:
        </h3>
        <ul>
            <li>How to setup the tool and the environment.</li>
            <li>How to use the tool.</li>
        </ul>
    </section>

    <section class="commandline">
        <header>
            <h3>Setting Up the Environment:</h3>
        </header>

        <ul>
            <li>Download <span style="color:darkslateblue">ConfigurationTool.zip</span> from <a
                    href="file://engfile6/Transfer/PublicDrop/Arno" target="_blank">
                    \\engfile6\Transfer\PublicDrop\Arno</a></li>
            <li>Extract ConfigurationTool.zip off the root on your local computer, i.e. d:\ConfigurationTool.</li>
            <li>You should expect to see the following files under D:\ConfigurationTool:</li>
            <li>
                <ol>
                    <li>ConfigurationTool.exe</li>
                    <li>ConfigurationTool.pdb</li>
                    <li>DebugLib.dll</li>
                    <li>DebugLib.zip (which you can delete if you've extracted it)</li>
                    <li>FourDClient.dll</li>
                    <li>ftd2xx.dll</li>
                    <li>GraphicsHardwareLib.dll</li>
                    <li>IPC.dll</li>
                    <li>libxml2.dll</li>
                    <li>PCRE.dll</li>
                    <li>sfbluebox2control.dll</li>
                    <li>XOS.dll</li>
                </ol>
            </li>
        </ul>
        <p>
            <img src="images/ConfigDirectorySSmall.png" alt="What the folder looks like.">
        </p>
        <p>At this point we could actually run the tool from the command line, but since we're not commoners, let's move
            on to setting up the application.</p>
    </section>

    <article class=uiapp>
        <header>
            <h3>Setup the UI Tool</h3>
        </header>
        <section>
            <p> The UI Tool is the Windows version of the Configuration Tool. It takes the tedium out of extracting,
                decrypting, decoding, and encryption of EGM configuration data.</p>
        </section>
        <section>
            <p>
                Make sure we have first set up the ConfigurationTool, as described above.
            </p>
            The UI tool is very simple to use, with a minimal interface, and requiring only a couple of mouse-clicks to use.
            <br>
            <ul>
                <li>Download EgmConfigEnDecrypter.exe from <a href="file://engfile6/Transfer/PublicDrop/Arno"
                        target="_blank">//engfile6/Transfer/PublicDrop/Arno</a></li>
                <li>EgmConfigEnDecrypter.exe is a stand-alone, self-contained executable, so you can copy it to wherever
                    you like.
                </li>               
            </ul>
            <p>
                <img src="images/ConfigfileDecrypterSmall.png" alt="What the tool looks like.">
            </p>
        </section>
        <section>
            <h3>
                Encryption/Decryption Workflow
            </h3>
            <p>
                The assignment is to modify configuration data on an EGM.  If there are a lot of modifications to make, it can be faster to make the mods on a local computer instead.  To do that, you can export the configuration data to a USB drive and transport it to the PC.  The data is encrypted though, so there are some processes which need to be executed first.  The following is the workflow to gather configuration data, modify it, and replace the data on the EGM with the new configuration. 
            </p>
            <ul>
                <li>Go to the target EGM and insert the E-Key</li>
                <li>Navigate to: <ol>
                    <li>Setup</li>
                    <li>Import & Export</li>
                    <li>Export</li>
                    <li>USB - OK</li>
                    <li>At the <i>USB not found</i> message, insert a USB drive</li>
                    <li>Give the configuration a name of your choice.  In this example, I wil call it <i><b style="color: red;">limitsmods</b></i></li>
                    <li>Wait for the <i>Configuration exported successfully</i> message, then remove the USB drive</li>
                    <li>Insert the USB drive into your PC</li>
                    <li>With Windows Explorer, navigate to the USB drive and verify that you have a <i>limitsmods.configuration</i> folder.</li>
                    <li>That folder should contain 4 files:
                        <ol>
                            <li>limitsmods.encrypted</li>
                            <li>limitsmods.p.encrypted</li>
                            <li>limitsmods.p.security</li>
                            <li>limitsmods.security</li>                            
                    </ol></li>
                </ol> </li>
                <li>Navigate to where you installed EgmConfigEnDecrypter.exe and launch it.  You should see the image above</li>                
                <li>Click the Browse button on <i>Path to ConfigurationTool</i> and navigate to the folder that contains ConfigurationTool.exe if it is not in the default location.</li>
                <li>Click the Browse button on <i>Path to EGM configuration files directory</i> and navigate to the limitsmods.configuration folder on the USB stick that you inserted from the EGM.</li>               
                <li>Click the <i>Decrypt Config File</i> button and observe the <b style="color:darkgreen;">Decryption Successful!</b> message.</li>
                <li><img src="images/decryptionsuccessful.png" alt="successful decryption."></li>               
            </ul>
            <p>
                At this point you will find that you have the limitsmods.configuration folder inside your d:\ConfigurationTool folder, with the additions of a new .xml file.  In our example case, it's called limitsmods.xml.  You do not have to close the configuration tool.
            </p>
            <br><img src="images/addedxml.png" alt="successful decryption.">
            <p>
                Best practices would suggest that you make a copy of this .xml file, now, to compare your on-going changes against with, with something like Beyond Compare.  
            </p>
        </section>

        <section>
            <h3>
                Take your modified configuration file and import it into an EGM
            </h3>
            <p>At this point we will assume that you have made your changes to the limitsmods.xml file and saved them using the same filename it was exported with.  (do not change the filename from the original.  Importing to an EGM will not work with a different filename).</p>
            <ul>
                <li>If you have closed the configuration tool UI, reopen it and reselect the proper locations.  </li>
                <li>Click on the <i>Encrypt</i> button</li>
                <li>The appropriate files will be copied from the local drive back on to the USB drive.</li>
                <li><img src="images/encryptionsuccessful.png" alt="successful encryption"></li>
                <li>At the <i>Successful Decryption</i> message, properly eject the USB drive</li>
                <li>Go back to the EGM:</li>

                <li><ol>
                    <li>Insert the E-Key, if it had been removed.</li>
                    <li>Setup</li>
                    <li>Import & Export</li>
                    <li>Import</li>
                    <li>USB - OK</li>
                    <li>At the <i>USB not found</i> message, insert a USB drive</li>
                    <li>Select the configuration file from the list (if there's more than one) and click OK</li>
                    <li>(if you did not follow the instructions properly, you will see a <i>HMAC Mismatch</i> message and will have to try again).</li>
                    <li>Select the Game theme the config applies to.</li>
                    <li>Check whether you want to clone serial settings if it displays (I haven't determined if it matters - I've tested both ways)</li>
                    <li>Click OK, pull the USB drive and let the EGM reboot.</li>
                </ol></li>
                <li>You are done!  At this point you can enter the menu and manually check that your changes have been made.</li>               
            </ul>
        </section>
    </article>

</body>

</html>